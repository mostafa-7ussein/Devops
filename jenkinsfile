pipeline {
    agent any

    environment {
        DOCKER_IMAGE='mostafahu/wordpress'
        DOCKER_CREDENTIALS_ID='dockerhub'
   
   
     }
     
     stage('Build'){
        steps{
            script{
                dockerImage=docker.Build("${DOCKER_IMAGE}:${env.BUILD_ID}")
            }
        }
     }
     stage('push'){
        steps{
            script{
                docker.withRegistry('',"${DOCKER_CREDENTIALS_ID}"){
                    dockerImage.push($env.BUILD_ID)
                    ddockerImage.push("latest")
                }
            }
        }
     }

      }

 